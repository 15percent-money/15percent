<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>15Percent | ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø¯Ø®Ù„</title>
  <style>
    body {
      margin: 0;
      font-family: Tahoma, sans-serif;
      background: #f2f9ff;
      color: #002b5c;
    }
    header, footer {
      background: #002b5c;
      color: white;
      text-align: center;
      padding: 15px;
      font-weight: bold;
    }
    .lang-toggle {
      text-align: left;
      padding: 10px;
    }
    .container {
      max-width: 900px;
      margin: auto;
      padding: 20px;
    }
    input, select, button {
      width: 100%;
      margin-bottom: 10px;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 14px;
    }
    button {
      background: #004aad;
      color: white;
      font-weight: bold;
      cursor: pointer;
      transition: 0.3s ease;
    }
    button:hover {
      opacity: 0.9;
    }
    button.reset {
      background: #b00020;
    }
    button.undo {
      background: #888;
    }
    .section {
      margin-top: 20px;
      padding: 20px;
      background: white;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      transition: 0.3s ease;
    }
    .section h3:before {
      content: attr(data-icon);
      margin-left: 10px;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      background: #e2f0ff;
      margin-bottom: 6px;
      padding: 10px;
      border-radius: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: 0.3s ease;
    }
    li.done span {
      text-decoration: line-through;
      opacity: 0.6;
    }
    .actions button {
      margin-left: 5px;
      border: none;
      padding: 5px 8px;
      border-radius: 6px;
      font-size: 13px;
    }
    .done-btn { background: #2ecc71; color: white; }
    .delete-btn { background: #e74c3c; color: white; }
    .toast {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #004aad;
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      opacity: 0;
      transition: 0.5s;
      z-index: 1000;
    }
    .toast.show { opacity: 1; }
    .suggestion {
      text-align: center;
      font-weight: bold;
      color: #007700;
      margin-top: 15px;
    }
    .report-section {
      margin-top: 30px;
      background: white;
      padding: 20px;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>
  <header id="header-title">Ù†Ø¸Ø§Ù… ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø¯Ø®Ù„ - 15Percent</header>
  <div class="lang-toggle">
    <button id="langToggle" onclick="toggleLanguage()">English</button>
  </div>
  <div class="container">
    <label id="income-label">Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„ÙƒÙ„ÙŠ</label>
    <input type="number" id="income" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº">

    <label id="currency-label">Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…Ù„Ø©</label>
    <select id="currency">
      <option value="USD">$ Ø¯ÙˆÙ„Ø§Ø±</option>
      <option value="EUR">â‚¬ ÙŠÙˆØ±Ùˆ</option>
      <option value="AED">Ø¯.Ø¥ Ø¯Ø±Ù‡Ù…</option>
      <option value="SAR">Ø±.Ø³ Ø±ÙŠØ§Ù„</option>
      <option value="KWD">Ø¯.Ùƒ Ø¯ÙŠÙ†Ø§Ø±</option>
    </select>
    <button id="addIncomeBtn" onclick="addIncome()">Ø£Ø¶Ù Ø§Ù„Ø¯Ø®Ù„</button>
    <button class="reset" id="resetBtn" onclick="resetData()">Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
    <button class="undo" id="undoBtn" onclick="undoLast()">ØªØ±Ø§Ø¬Ø¹</button>

    <div class="section">
      <h3 id="personal-title" data-icon="ğŸ‘¤">Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø´Ø®ØµÙŠ: <span id="personal-balance">0</span></h3>
      <input type="text" id="personal-item" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¨Ù†Ø¯">
      <input type="number" id="personal-amount" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº">
      <button class="add-item-btn" onclick="addItem('personal')">Ø¥Ø¶Ø§ÙØ© Ø¨Ù†Ø¯</button>
      <ul id="personal-list"></ul>
    </div>

    <div class="section">
      <h3 id="commitments-title" data-icon="ğŸ“„">Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª: <span id="commitments-balance">0</span></h3>
      <input type="text" id="commitments-item" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¨Ù†Ø¯">
      <input type="number" id="commitments-amount" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº">
      <button class="add-item-btn" onclick="addItem('commitments')">Ø¥Ø¶Ø§ÙØ© Ø¨Ù†Ø¯</button>
      <ul id="commitments-list"></ul>
    </div>

    <div class="section">
      <h3 id="investment-title" data-icon="ğŸ“ˆ">Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±: <span id="investment-balance">0</span></h3>
      <input type="text" id="investment-item" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¨Ù†Ø¯">
      <input type="number" id="investment-amount" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº">
      <button class="add-item-btn" onclick="addItem('investment')">Ø¥Ø¶Ø§ÙØ© Ø¨Ù†Ø¯</button>
      <ul id="investment-list"></ul>
      <div class="suggestion" id="suggestionBox"></div>
    </div>

    <div class="report-section">
      <h3>ğŸ“„ Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ± Ù…ÙØµÙ„</h3>
      <label for="report-account">Ø§Ø®ØªØ± Ø§Ù„Ø­Ø³Ø§Ø¨</label>
      <select id="report-account">
        <option value="personal">Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø´Ø®ØµÙŠ</option>
        <option value="commitments">Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª</option>
        <option value="investment">Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±</option>
      </select>
      <label>Ù…Ù† ØªØ§Ø±ÙŠØ®</label>
      <input type="date" id="report-from">
      <label>Ø¥Ù„Ù‰ ØªØ§Ø±ÙŠØ®</label>
      <input type="date" id="report-to">
      <button onclick="generateReport()">Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
    </div>
  </div>

  <div class="toast" id="toast">ØªÙ…Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­</div>
  <footer id="footer-text">Â©ï¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© - 15Percent</footer>
  <script>
  let balances = { personal: 0, commitments: 0, investment: 0 };
  let currency = 'USD';
  let currentLang = 'ar';
  let items = { personal: [], commitments: [], investment: [] };
  let lastActions = [];

  const symbols = { USD: "$", EUR: "â‚¬", AED: "Ø¯.Ø¥", SAR: "Ø±.Ø³", KWD: "Ø¯.Ùƒ" };

  function showToast(msg) {
    const toast = document.getElementById("toast");
    toast.textContent = msg;
    toast.classList.add("show");
    setTimeout(() => toast.classList.remove("show"), 3000);
  }

  function addItem(type) {
    const item = document.getElementById(`${type}-item`).value;
    const amount = parseFloat(document.getElementById(`${type}-amount`).value);
    if (!item || isNaN(amount)) return;
    items[type].push({ name: item, amount, date: new Date().toISOString() });
    lastActions.push(JSON.stringify({ balances, items }));
    saveData();
    renderItems();
    showToast("ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨Ù†Ø¯");
  }

  function addIncome() {
    const income = parseFloat(document.getElementById('income').value);
    currency = document.getElementById('currency').value;
    if (!income || income <= 0) return alert("Ø£Ø¯Ø®Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­");
    lastActions.push(JSON.stringify({ balances, items }));
    const third = income / 3;
    balances.personal += third;
    balances.commitments += third;
    balances.investment += third;
    updateUI();
    showToast("ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¯Ø®Ù„");
    showSuggestion();
    saveData();
  }

  function undoLast() {
    if (!lastActions.length) return;
    const last = lastActions.pop();
    const state = JSON.parse(last);
    balances = state.balances;
    items = state.items;
    updateUI();
    renderItems();
    showSuggestion();
    saveData();
  }
</script>
<script>
  function generateReport() {
    const type = document.getElementById("report-account").value;
    const from = new Date(document.getElementById("report-from").value);
    const to = new Date(document.getElementById("report-to").value);

    if (!type || isNaN(from.getTime()) || isNaN(to.getTime())) {
      alert("ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ¯ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„");
      return;
    }

    const filtered = items[type].filter(i => {
      const d = new Date(i.date);
      return d >= from && d <= to;
    });

    let content = `ØªÙ‚Ø±ÙŠØ± ${type === 'personal' ? 'Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø´Ø®ØµÙŠ' : type === 'commitments' ? 'Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª' : 'Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±'}\n`;
    content += `Ù…Ù† ${from.toLocaleDateString()} Ø¥Ù„Ù‰ ${to.toLocaleDateString()}\n\n`;

    filtered.forEach((i, idx) => {
      const date = new Date(i.date).toLocaleDateString();
      content += `${idx + 1}. ${i.name} - ${i.amount.toFixed(2)} ${symbols[currency]} - Ø§Ù„ØªØ§Ø±ÙŠØ®: ${date}\n`;
    });

    const w = window.open("", "_blank");
    w.document.write(`<pre>${content}</pre>`);
    w.print();
  }

  function updateUI() {
    document.getElementById('personal-balance').textContent = balances.personal.toFixed(2) + " " + symbols[currency];
    document.getElementById('commitments-balance').textContent = balances.commitments.toFixed(2) + " " + symbols[currency];
    document.getElementById('investment-balance').textContent = balances.investment.toFixed(2) + " " + symbols[currency];
  }

  function renderItems() {
    ['personal', 'commitments', 'investment'].forEach(type => {
      const list = document.getElementById(`${type}-list`);
      list.innerHTML = '';
      items[type].forEach(({ name, amount }) => {
        const li = document.createElement("li");
        const span = document.createElement("span");
        span.textContent = `${name} - ${amount.toFixed(2)} ${symbols[currency]}`;

        const actions = document.createElement("div");
        actions.className = "actions";

        const doneBtn = document.createElement("button");
        doneBtn.className = "done-btn";
        doneBtn.textContent = "âœ…";
        doneBtn.onclick = () => {
          li.classList.add("done");
          balances[type] -= amount;
          updateUI();
          showSuggestion();
          saveData();
        };

        const delBtn = document.createElement("button");
        delBtn.className = "delete-btn";
        delBtn.textContent = "âŒ";
        delBtn.onclick = () => {
          lastActions.push(JSON.stringify({ balances, items }));
          items[type] = items[type].filter(i => !(i.name === name && i.amount === amount));
          saveData();
          renderItems();
        };

        actions.appendChild(doneBtn);
        actions.appendChild(delBtn);
        li.appendChild(span);
        li.appendChild(actions);
        list.appendChild(li);
      });
    });
  }
</script>
<script>
  function undoLast() {
    if (lastActions.length === 0) return;
    const prevState = JSON.parse(lastActions.pop());
    balances = prevState.balances;
    items = prevState.items;
    saveData();
    renderItems();
    updateUI();
    showSuggestion();
    showToast("ØªÙ… Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ø¢Ø®Ø± Ø¥Ø¬Ø±Ø§Ø¡");
  }

  function addIncome() {
    const income = parseFloat(document.getElementById('income').value);
    currency = document.getElementById('currency').value;
    if (!income || income <= 0) return alert("Ø£Ø¯Ø®Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­");

    lastActions.push(JSON.stringify({ balances, items }));

    const third = income / 3;
    balances.personal += third;
    balances.commitments += third;
    balances.investment += third;

    updateUI();
    showToast("ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¯Ø®Ù„");
    showSuggestion();
    saveData();
  }

  function resetData() {
    if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ")) {
      lastActions.push(JSON.stringify({ balances, items }));
      balances = { personal: 0, commitments: 0, investment: 0 };
      items = { personal: [], commitments: [], investment: [] };
      updateUI();
      renderItems();
      showSuggestion();
      localStorage.clear();
    }
  }

  function saveData() {
    localStorage.setItem("balances", JSON.stringify(balances));
    localStorage.setItem("currency", currency);
    localStorage.setItem("items", JSON.stringify(items));
  }

  function loadData() {
    const saved = localStorage.getItem("balances");
    if (saved) balances = JSON.parse(saved);
    const cur = localStorage.getItem("currency");
    if (cur) {
      currency = cur;
      document.getElementById("currency").value = currency;
    }
    const savedItems = localStorage.getItem("items");
    if (savedItems) items = JSON.parse(savedItems);
    updateUI();
    renderItems();
    showSuggestion();
  }
</script>
<script>
  function showSuggestion() {
    const val = balances.investment;
    const box = document.getElementById("suggestionBox");
    let msg = "";
    if (val >= 1000) msg = texts[currentLang].suggestionHigh;
    else if (val >= 500) msg = texts[currentLang].suggestionMid;
    else msg = texts[currentLang].suggestionLow;
    box.textContent = msg;
  }

  const texts = {
    ar: {
      lang: "English",
      header: "Ù†Ø¸Ø§Ù… ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø¯Ø®Ù„ - 15Percent",
      income: "Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„ÙƒÙ„ÙŠ",
      placeholderIncome: "Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº",
      currency: "Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…Ù„Ø©",
      addIncome: "Ø£Ø¶Ù Ø§Ù„Ø¯Ø®Ù„",
      reset: "Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª",
      undo: "ØªØ±Ø§Ø¬Ø¹",
      personal: "Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø´Ø®ØµÙŠ",
      commitments: "Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª",
      investment: "Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±",
      itemName: "Ø§Ø³Ù… Ø§Ù„Ø¨Ù†Ø¯",
      amount: "Ø§Ù„Ù…Ø¨Ù„Øº",
      addItem: "Ø¥Ø¶Ø§ÙØ© Ø¨Ù†Ø¯",
      footer: "Â©ï¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© - 15Percent",
      suggestionHigh: "ğŸ’¡ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¨Ø¯Ø¡ Ø¨Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± ÙÙŠ Ù…Ø´Ø§Ø±ÙŠØ¹ ÙƒØ¨ÙŠØ±Ø© Ø£Ùˆ ØµÙ†Ø§Ø¯ÙŠÙ‚ Ø·ÙˆÙŠÙ„Ø© Ø§Ù„Ø£Ø¬Ù„.",
      suggestionMid: "ğŸ’¡ ÙÙƒØ± ÙÙŠ Ø§Ø³ØªØ«Ù…Ø§Ø± Ù…ØªÙ†ÙˆØ¹ Ù…ØªÙˆØ³Ø· Ø§Ù„Ù…Ø¯Ù‰ Ø£Ùˆ Ø¨Ø¯Ø¡ Ù…Ø´Ø±ÙˆØ¹ ØµØºÙŠØ±.",
      suggestionLow: "ğŸ’¡ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¨Ø¯Ø¡ Ø¨Ø§Ø¯Ø®Ø§Ø± Ø§Ù„Ù…Ø¨Ù„Øº Ø£Ùˆ Ø§Ø³ØªØ«Ù…Ø§Ø±Ù‡ ÙÙŠ Ø¯ÙˆØ±Ø§Øª ØªØ¹Ù„ÙŠÙ…ÙŠØ©.",
    },
    en: {
      lang: "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
      header: "15Percent - Income Split System",
      income: "Total Income",
      placeholderIncome: "Enter amount",
      currency: "Choose currency",
      addIncome: "Add Income",
      reset: "Reset All",
      undo: "Undo",
      personal: "Personal Account",
      commitments: "Commitments",
      investment: "Investment",
      itemName: "Item Name",
      amount: "Amount",
      addItem: "Add Item",
      footer: "Â©ï¸ All rights reserved - 15Percent",
      suggestionHigh: "ğŸ’¡ You can start investing in large projects or long-term funds.",
      suggestionMid: "ğŸ’¡ Consider medium-level investments or starting a small business.",
      suggestionLow: "ğŸ’¡ Consider saving this amount or investing in education.",
    }
  };

  window.onload = loadData;
</script>
</body>
</html>
