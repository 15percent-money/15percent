<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>15Percent | تقسيم الدخل</title>
  <style>
    body {
      margin: 0;
      font-family: Tahoma, sans-serif;
      background: #f2f9ff;
      color: #002b5c;
    }
    header, footer {
      background: #002b5c;
      color: white;
      text-align: center;
      padding: 15px;
      font-weight: bold;
    }
    .lang-toggle {
      text-align: left;
      padding: 10px;
    }
    .container {
      max-width: 800px;
      margin: auto;
      padding: 20px;
    }
    input, select, button {
      width: 100%;
      margin-bottom: 10px;
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 14px;
    }
    button {
      background: #004aad;
      color: white;
      font-weight: bold;
      cursor: pointer;
    }
    button.reset {
      background: #b00020;
    }
    .section {
      margin-top: 20px;
      padding: 15px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 0 5px #ccc;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      background: #e2f0ff;
      margin-bottom: 6px;
      padding: 10px;
      border-radius: 6px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    li.done span {
      text-decoration: line-through;
      opacity: 0.6;
    }
    .actions button {
      margin-left: 5px;
      border: none;
      padding: 5px;
      border-radius: 4px;
      font-size: 14px;
    }
    .done-btn { background: #2ecc71; color: white; }
    .delete-btn { background: #e74c3c; color: white; }
    .toast {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: #004aad;
      color: white;
      padding: 12px 20px;
      border-radius: 6px;
      opacity: 0;
      transition: 0.5s;
    }
    .toast.show { opacity: 1; }
    .suggestion {
      text-align: center;
      font-weight: bold;
      color: #007700;
      margin-top: 15px;
    }
  </style>
</head>
<body>
  <header id="header-title">نظام تقسيم الدخل - 15Percent</header>
  <div class="lang-toggle">
    <button id="langToggle" onclick="toggleLanguage()">English</button>
  </div>
  <div class="container">
    <label id="income-label">الدخل الكلي</label>
    <input type="number" id="income" placeholder="أدخل المبلغ">
    
    <label id="currency-label">اختر العملة</label>
    <select id="currency">
      <option value="USD">$ دولار</option>
      <option value="EUR">€ يورو</option>
      <option value="AED">د.إ درهم</option>
      <option value="SAR">ر.س ريال</option>
      <option value="KWD">د.ك دينار</option>
    </select>
    
    <button id="addIncomeBtn" onclick="addIncome()">أضف الدخل</button>
    <button class="reset" id="resetBtn" onclick="resetData()">مسح كل البيانات</button>

    <div class="section">
      <h3 id="personal-title">الحساب الشخصي: <span id="personal-balance">0</span></h3>
      <input type="text" id="personal-item" placeholder="اسم البند">
      <input type="number" id="personal-amount" placeholder="المبلغ">
      <button class="add-item-btn" onclick="addItem('personal')">إضافة بند</button>
      <ul id="personal-list"></ul>
    </div>

    <div class="section">
      <h3 id="commitments-title">الالتزامات: <span id="commitments-balance">0</span></h3>
      <input type="text" id="commitments-item" placeholder="اسم البند">
      <input type="number" id="commitments-amount" placeholder="المبلغ">
      <button class="add-item-btn" onclick="addItem('commitments')">إضافة بند</button>
      <ul id="commitments-list"></ul>
    </div>

    <div class="section">
      <h3 id="investment-title">الاستثمار: <span id="investment-balance">0</span></h3>
      <input type="text" id="investment-item" placeholder="اسم البند">
      <input type="number" id="investment-amount" placeholder="المبلغ">
      <button class="add-item-btn" onclick="addItem('investment')">إضافة بند</button>
      <ul id="investment-list"></ul>
      <div class="suggestion" id="suggestionBox"></div>
    </div>
  </div>

  <div class="toast" id="toast">تمت العملية بنجاح</div>
  <footer id="footer-text">© جميع الحقوق محفوظة - 15Percent</footer>

<script>
  let balances = { personal: 0, commitments: 0, investment: 0 };
  let currency = 'USD';
  let currentLang = 'ar';

  const symbols = { USD: "$", EUR: "€", AED: "د.إ", SAR: "ر.س", KWD: "د.ك" };
  const texts = {
    ar: {
      header: "نظام تقسيم الدخل - 15Percent",
      income: "الدخل الكلي",
      placeholderIncome: "أدخل المبلغ",
      currency: "اختر العملة",
      addIncome: "أضف الدخل",
      reset: "مسح كل البيانات",
      personal: "الحساب الشخصي",
      commitments: "الالتزامات",
      investment: "الاستثمار",
      itemName: "اسم البند",
      amount: "المبلغ",
      addItem: "إضافة بند",
      toast: "تمت العملية بنجاح",
      suggestionHigh: "استثمر في مشروع أو عمل حر.",
      suggestionMid: "ادخر لصندوق الطوارئ.",
      suggestionLow: "ابدأ بتعلم مهارة جديدة.",
      footer: "© جميع الحقوق محفوظة - 15Percent",
      lang: "English"
    },
    en: {
      header: "15Percent - Income Split System",
      income: "Total Income",
      placeholderIncome: "Enter amount",
      currency: "Select currency",
      addIncome: "Add Income",
      reset: "Reset All Data",
      personal: "Personal Account",
      commitments: "Commitments",
      investment: "Investment",
      itemName: "Item Name",
      amount: "Amount",
      addItem: "Add Item",
      toast: "Operation successful",
      suggestionHigh: "Invest in a business or side project.",
      suggestionMid: "Save for an emergency fund.",
      suggestionLow: "Start learning a new skill.",
      footer: "© All rights reserved - 15Percent",
      lang: "العربية"
    }
  };

  function updateUI() {
    document.getElementById('personal-balance').textContent = balances.personal.toFixed(2) + " " + symbols[currency];
    document.getElementById('commitments-balance').textContent = balances.commitments.toFixed(2) + " " + symbols[currency];
    document.getElementById('investment-balance').textContent = balances.investment.toFixed(2) + " " + symbols[currency];
  }

  function addIncome() {
    const income = parseFloat(document.getElementById('income').value);
    currency = document.getElementById('currency').value;
    if (!income || income <= 0) return alert(currentLang === 'ar' ? "أدخل مبلغ صحيح" : "Enter valid amount");
    const third = income / 3;
    balances.personal += third;
    balances.commitments += third;
    balances.investment += third;
    updateUI();
    showToast(texts[currentLang].toast);
    showSuggestion();
    saveData();
  }

  function addItem(type) {
    const item = document.getElementById(`${type}-item`).value;
    const amount = parseFloat(document.getElementById(`${type}-amount`).value);
    if (!item || isNaN(amount)) return;

    const li = document.createElement("li");
    const span = document.createElement("span");
    span.textContent = `${item} - ${amount.toFixed(2)} ${symbols[currency]}`;

    const actions = document.createElement("div");
    actions.className = "actions";

    const doneBtn = document.createElement("button");
    doneBtn.className = "done-btn";
    doneBtn.textContent = "✅";
    doneBtn.onclick = () => {
      li.classList.add("done");
      balances[type] -= amount;
      updateUI();
      showSuggestion();
      saveData();
    };

    const delBtn = document.createElement("button");
    delBtn.className = "delete-btn";
    delBtn.textContent = "❌";
    delBtn.onclick = () => li.remove();

    actions.appendChild(doneBtn);
    actions.appendChild(delBtn);
    li.appendChild(span);
    li.appendChild(actions);
    document.getElementById(`${type}-list`).appendChild(li);
  }

  function showToast(msg) {
    const toast = document.getElementById("toast");
    toast.textContent = msg;
    toast.classList.add("show");
    setTimeout(() => toast.classList.remove("show"), 3000);
  }

  function showSuggestion() {
    const val = balances.investment;
    const box = document.getElementById("suggestionBox");
    let msg = "";
    if (val >= 1000) msg = texts[currentLang].suggestionHigh;
    else if (val >= 500) msg = texts[currentLang].suggestionMid;
    else msg = texts[currentLang].suggestionLow;
    box.textContent = msg;
  }

  function toggleLanguage() {
    currentLang = currentLang === 'ar' ? 'en' : 'ar';
    document.documentElement.lang = currentLang;
    document.documentElement.dir = currentLang === 'ar' ? 'rtl' : 'ltr';
    document.getElementById("langToggle").textContent = texts[currentLang].lang;
    document.getElementById("header-title").textContent = texts[currentLang].header;
    document.getElementById("income-label").textContent = texts[currentLang].income;
    document.getElementById("income").placeholder = texts[currentLang].placeholderIncome;
    document.getElementById("currency-label").textContent = texts[currentLang].currency;
    document.getElementById("addIncomeBtn").textContent = texts[currentLang].addIncome;
    document.getElementById("resetBtn").textContent = texts[currentLang].reset;
    document.getElementById("personal-title").childNodes[0].textContent = texts[currentLang].personal + ": ";
    document.getElementById("commitments-title").childNodes[0].textContent = texts[currentLang].commitments + ": ";
    document.getElementById("investment-title").childNodes[0].textContent = texts[currentLang].investment + ": ";
    document.querySelectorAll("input[placeholder='اسم البند']").forEach(el => el.placeholder = texts[currentLang].itemName);
    document.querySelectorAll("input[placeholder='المبلغ']").forEach(el => el.placeholder = texts[currentLang].amount);
    document.querySelectorAll(".add-item-btn").forEach(el => el.textContent = texts[currentLang].addItem);
    document.getElementById("footer-text").textContent = texts[currentLang].footer;
    showSuggestion();
  }

  function resetData() {
    if (confirm(currentLang === 'ar' ? "هل أنت متأكد؟" : "Are you sure?")) {
      balances = { personal: 0, commitments: 0, investment: 0 };
      ['personal-list', 'commitments-list', 'investment-list'].forEach(id => {
        document.getElementById(id).innerHTML = '';
      });
      updateUI();
      document.getElementById("suggestionBox").textContent = "";
      localStorage.clear();
    }
  }

  function saveData() {
    localStorage.setItem("balances", JSON.stringify(balances));
    localStorage.setItem("currency", currency);
  }

  function loadData() {
    const saved = localStorage.getItem("balances");
    if (saved) balances = JSON.parse(saved);
    const cur = localStorage.getItem("currency");
    if (cur) {
      currency = cur;
      document.getElementById("currency").value = currency;
    }
    updateUI();
    showSuggestion();
  }

  window.onload = loadData;
</script>
</body>
</html>